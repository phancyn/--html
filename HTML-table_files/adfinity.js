(()=>{window.adfinityData={"staticUrl":"https:\/\/cdn.adfinity.pro\/code","domains":{"main":"html5book.ru","mirror":[".*\\.html5book\\.ru"]},"url_exception":[],"siteConfig":{"blocks":[{"blockId":4415,"blockCaption":"D_Content_1_r","publishedAt":"2024-07-17 14:55:57","creatives":{"only_one":{"type":"adfox","params":{"containerId":"adfox_168725737891447693","type":"adaptive","ownerId":689817,"params":{"pp":"chmh","ps":"gpjo","p2":"ikvq","ld":"https:\/\/html5book.ru","dl":"https:\/\/html5book.ru"},"lazyLoad":{"fetchMargin":"100","mobileScaling":"1.5"},"bannerStates":["tablet","desktop"],"adaptiveOptions":{"phoneWidth":768},"adUnit":{"bids":[{"bidder":"adriver","params":{"placementId":"99:html5book.ru_728x90_D_Content_1"}},{"bidder":"bidvol","params":{"placementId":"36661"}},{"bidder":"betweenDigital","params":{"placementId":"4708468","sendTargetRef":true}},{"bidder":"buzzoola","params":{"placementId":"1249593","sendTargetRef":true}},{"bidder":"myTarget","params":{"placementId":"1305454"}},{"bidder":"hybrid","params":{"placementId":"64917ed2982f34bde0bb90f5"}},{"bidder":"otm","params":{"placementId":"46745"}},{"bidder":"sape","params":{"placementId":"852290"}},{"bidder":"astralab","params":{"placementId":"64a26fe08dc2ca0395d87920"}}],"sizes":[[728,90],[728,200],[728,250],[468,60]]}}}},"formatType":"content","formatParams":{"height":"280","unitsMeasurement":"px","unitsMeasurementPlaceholder":"px","typeEmbedding":"codeHtml","cssPath":".adfinity_block_4415","cssPosition":"afterBegin","infinityScroll":"1","overloadAfterLoad":"30","showPlaceholder":false,"stopScrollHeight":100,"stopScrollPBwidth":10,"stopScrollPBcolor":"#E6E6E6","stopScrollPBbgcolor":"#E6E6E6"},"active":2,"urlsAllowed":"","urlsForbidden":"","mediaFormatType":"D","widthWindowToShow":{"min":768},"styles":""},{"blockId":4416,"blockCaption":"M_Content_1_r","publishedAt":"2024-07-17 14:55:57","creatives":{"only_one":{"type":"adfox","params":{"containerId":"adfox_168726636874211615","type":"adaptive","ownerId":689817,"params":{"pp":"chmb","ps":"gpjo","p2":"ikvy","ld":"https:\/\/html5book.ru","dl":"https:\/\/html5book.ru"},"lazyLoad":{"fetchMargin":"100","mobileScaling":"1.5"},"bannerStates":["phone","tablet"],"adaptiveOptions":{"tabletWidth":768},"adUnit":{"bids":[{"bidder":"adriver","params":{"placementId":"99:html5book.ru_300x600_M_Content_1"}},{"bidder":"bidvol","params":{"placementId":"36675"}},{"bidder":"betweenDigital","params":{"placementId":"4708486","sendTargetRef":true}},{"bidder":"buzzoola","params":{"placementId":"1249615","sendTargetRef":true}},{"bidder":"myTarget","params":{"placementId":"1305610"}},{"bidder":"hybrid","params":{"placementId":"6491a2c6982f34bde0bb90f6"}},{"bidder":"otm","params":{"placementId":"46761"}},{"bidder":"sape","params":{"placementId":"852316"}},{"bidder":"astralab","params":{"placementId":"64a270178dc2ca0395d87921"}}],"sizes":[[300,600],[300,250],[240,400],[336,280],[300,300]]}}}},"formatType":"content","formatParams":{"height":"80","unitsMeasurement":"vh","unitsMeasurementPlaceholder":"px","typeEmbedding":"codeHtml","cssPath":".adfinity_block_4416","cssPosition":"afterBegin","infinityScroll":"1","overloadAfterLoad":"30","showPlaceholder":false,"stopScrollHeight":100,"stopScrollPBwidth":10,"stopScrollPBcolor":"#E6E6E6","stopScrollPBbgcolor":"#E6E6E6"},"active":2,"urlsAllowed":"","urlsForbidden":"","mediaFormatType":"M","widthWindowToShow":{"max":768},"styles":""},{"blockId":4432,"blockCaption":"D_Overlay_r","publishedAt":"2024-07-17 14:55:57","creatives":{"adfox_role":{"type":"adfox","params":{"containerId":"adfox_168750315834441030","type":"adaptive","ownerId":689817,"params":{"pp":"chlz","ps":"gpjo","p2":"ikxq","ld":"https:\/\/html5book.ru","dl":"https:\/\/html5book.ru"},"lazyLoad":{"fetchMargin":null,"mobileScaling":null},"bannerStates":["tablet","desktop"],"adaptiveOptions":{"phoneWidth":768},"adUnit":{"bids":[{"bidder":"adriver","params":{"placementId":"99:html5book.ru_728x90_D_Overlay_r"}},{"bidder":"bidvol","params":{"placementId":"36746"}},{"bidder":"betweenDigital","params":{"placementId":"4512027","sendTargetRef":true}},{"bidder":"buzzoola","params":{"placementId":"1249736","sendTargetRef":true}},{"bidder":"hybrid","params":{"placementId":"64953c40ec25ab3af8612f7d"}},{"bidder":"otm","params":{"placementId":"46818"}},{"bidder":"sape","params":{"placementId":"852463"}},{"bidder":"myTarget","params":{"placementId":"1307326"}}],"sizes":[[728,90],[800,90],[970,90],[468,60]]}}}},"formatType":"overlay","formatParams":{"width":"970","height":"90","unitsMeasurement":"px","position":"full","positionPanelClose":"default","blur":"8","canCloseAfter":"5","overloadAfterLoad":"30","kitRoles":"adfox_kit","storageLocal":false,"externalLaunchBan":false,"previousBlockTime":30},"active":2,"urlsAllowed":"","urlsForbidden":"","mediaFormatType":"D","widthWindowToShow":{"min":768},"styles":".D_Overlay_r{margin:auto;left:0;right:0}"}]},"creatives":{"adfox":{"syncPixels":[{"bidder":"betweenDigital","pixels":["https:\/\/ads.betweendigital.com\/sspmatch?p=42565&r=${CACHEBUSTER1}"]},{"bidder":"sape","pixels":["https:\/\/acint.net\/cmatch\/?dp=14&pi=1628885"]}],"userTimeout":500,"adfoxBiddersMap":{"adriver":1910953,"betweenDigital":1910961,"bidvol":1910989,"buzzoola":1910984,"otm":1910986,"hybrid":1910983,"myTarget":1910976,"sape":1979190,"segmento":1964603,"Gnezdo":2182068,"Kadam":2253175,"astralab":2293076,"videonow":2360314,"solta":2724158,"mediasniper":"2838912","mediatoday":"2884075"}}}}})();(()=>{"use strict";var __webpack_modules__={756:(t,e,r)=>{var n=r(705),o=r(575),i=r(473),a=r(906),c=function(){return(1e10*Math.random()).toFixed(0)},s=function(t){var e=t.getBoundingClientRect(),r=document.body,n=document.documentElement,o=window.scrollY||n.scrollTop||r.scrollTop,i=window.scrollX||n.scrollLeft||r.scrollLeft,a=n.clientTop||r.clientTop||0,c=n.clientLeft||r.clientLeft||0;return{top:e.top+o-a,left:e.left+i-c}},u=function(t){var e=t.getBoundingClientRect();return{top:e.top+window.scrollY,left:e.left+window.scrollX}},l=function(t){var e=t.getBoundingClientRect();return{top:e.top,left:e.left}},f=function(t){return JSON.parse(JSON.stringify(t))},p=r(307),d=r(958);function h(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function b(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,P(n.key),n)}}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=S(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},m.apply(this,arguments)}function g(t,e){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},g(t,e)}function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=S(t);if(e){var o=S(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _(this,r)}}function _(t,e){if(e&&("object"===v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return O(t)}function O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(t){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},S(t)}function k(t,e,r){return(e=P(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function P(t){var e=function(t,e){if("object"!==v(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===v(e)?e:String(e)}var j=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(s,t);var e,r,o,a=w(s);function s(t,e,r,n,o){var c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),k(O(c=a.call(this,t,e,r,n,o)),"containerId",!1),k(O(c),"bannerOptions",!1),k(O(c),"adUnit",!1),k(O(c),"styles",!1),k(O(c),"loadingFromAdfox",!1),O(c)?(s.useCreativeOnPage=!0,c.init(t,o),i.G.subscribe("creativeReload",c.blockId,(function(){return c.creativeReload()})),_(c)):_(c,!1)}return e=s,r=[{key:"validParams",value:function(t,e,r,o){if(!m(S(s.prototype),"validParams",this).call(this,t,e,r,o))return!1;var i=!1;return"object"!=v(o)?i="Не задан конфиг для adfox":void 0===o.ownerId?i="Не задан ownerId":void 0===o.params?i="Не заданы параметры блока":void 0===o.type?i="Не задан тип блока type":-1===["async","adaptive"].indexOf(o.type)?i="Не верный тип блока type":"adaptive"===o.type&&("object"!=v(o.bannerStates)?i="Для адаптивного блока не задан обязательный параметр bannerStates":"object"!=v(o.adaptiveOptions)&&(i="Для адаптивного блока не задан обязательный параметр adaptiveOptions")),!1===i||(n.T.err(i,t),!1)}},{key:"init",value:function(t,e){this.containerId=e.containerId,this.initBannerOptions(e),this.initHB(),this.initStyles()}},{key:"initBannerOptions",value:function(t){var e=this;this.bannerOptions={ownerId:t.ownerId,sequentialLoading:!0,containerId:this.containerId,params:t.params,onLoad:function(t){n.T.log("Блок ".concat(e.containerId," загружен"),e.blockId),e.isLoaded=!0,e.loadData=t,i.G.publish("adfoxCreativeLoad",e.blockId,{data:t}),e.loadingFromAdfox=!1},onRender:function(t){if(e.isLoaded){delete e.isLoaded,n.T.log("Блок ".concat(e.containerId," отрисован"),e.blockId),e.loadData.winBidder=e.getWinBidder(e.loadData),n.T.log("Загружен биддер - ".concat(e.loadData.winBidder),e.blockId);var r={dataRender:t,loadData:e.loadData,mustShowWrap:e.showWrapForBundle()};i.G.publish("creativeRender",e.blockId,r)}e.loadingFromAdfox=!1},onError:function(t){n.T.err("Ошибка при загрузке блока ".concat(e.containerId,": "),e.blockId),n.T.err(t,e.blockId),"adfoxBackend"==t.type&&n.T.err("Ошибка настройки блока в Adfox",e.blockId),i.G.publish("adfoxCreativeError",e.blockId,{error:t}),e.loadingFromAdfox=!1},onStub:function(){n.T.info("Отказ в загрузке блока ".concat(e.containerId),e.blockId),i.G.publish("creativeStub",e.blockId),e.loadingFromAdfox=!1},onClose:function(){n.T.info("Закрытие блока ".concat(e.containerId),e.blockId),i.G.publish("creativeClose",e.blockId)}},"object"==v(t.lazyLoad)&&(this.bannerOptions.lazyLoad=t.lazyLoad)}},{key:"showWrapForBundle",value:function(){var t;return-1==["banner.direct","banner.transfer"].indexOf(null===(t=this.loadData)||void 0===t?void 0:t.bundleName)}},{key:"getWinBidder",value:function(t){var e,r=!1;if("bid"==t.bundleName){if(null!==(e=t.bundleParams)&&void 0!==e&&e.bids){var o,i=h(t.bundleParams.bids);try{for(i.s();!(o=i.n()).done;){var a=o.value;if(Number(a.campaign_id)==Number(t.bundleParams.campaignId)){r=a.bidderName;break}}}catch(t){i.e(t)}finally{i.f()}}}else"banner.direct"==t.bundleName?r="РСЯ":"banner.transfer"==t.bundleName?r="mytarget":n.T.err(t,this.blockId);return r}},{key:"initHB",value:function(){var t,e,r,n,o,i,a;if(s.offAdfoxHeaderBidding)return!1;if(!this.checkMediaWidth())return!1;if("object"!=v(null===(t=this.params.adUnit)||void 0===t?void 0:t.bids)||0==this.params.adUnit.bids.length)return!1;this.adUnit=f(this.params.adUnit),this.adUnit.code=this.containerId;var c,u=h(this.adUnit.bids);try{for(u.s();!(c=u.n()).done;){var l=c.value;-1==s.bidders.indexOf(l.bidder)&&s.bidders.push(l.bidder)}}catch(t){u.e(t)}finally{u.f()}if(null!==(e=window.Ya)&&void 0!==e&&null!==(r=e.headerBidding)&&void 0!==r&&null!==(n=r.managerForAdfox)&&void 0!==n&&null!==(o=n.settings)&&void 0!==o&&o.adUnits){var p,d=h(window.Ya.headerBidding.managerForAdfox.settings.adUnits);try{for(d.s();!(p=d.n()).done;)if(p.value.code===this.adUnit.code)return!1}catch(t){d.e(t)}finally{d.f()}}void 0===(null===(i=window.Ya)||void 0===i||null===(a=i.headerBidding)||void 0===a?void 0:a.pr)?s.adUnits.push(this.adUnit):window.Ya.headerBidding.pushAdUnits([this.adUnit])}},{key:"checkMediaWidth",value:function(){var t=window.innerWidth;if("adaptive"==this.params.type){var e,r,n,o,i,a=null!==(e=parseInt(null===(r=this.params.adaptiveOptions)||void 0===r?void 0:r.tabletWidth))&&void 0!==e?e:830,c=null!==(n=parseInt(null===(o=this.params.adaptiveOptions)||void 0===o?void 0:o.phoneWidth))&&void 0!==n?n:480;if(t>a){if(-1==(null===(i=this.params.bannerStates)||void 0===i?void 0:i.indexOf("desktop")))return!1}else if(t>c){var s;if(-1==(null===(s=this.params.bannerStates)||void 0===s?void 0:s.indexOf("tablet")))return!1}else{var u;if(-1==(null===(u=this.params.bannerStates)||void 0===u?void 0:u.indexOf("phone")))return!1}}return!0}},{key:"initStyles",value:function(){if("adaptive"==this.params.type){var t,e,r,n,o=f(this.params.bannerStates);o.sort();var i=null!==(t=parseInt(null===(e=this.params.adaptiveOptions)||void 0===e?void 0:e.tabletWidth))&&void 0!==t?t:830,a=null!==(r=parseInt(null===(n=this.params.adaptiveOptions)||void 0===n?void 0:n.phoneWidth))&&void 0!==r?r:480,c=i+1,s=a+1,u={"desktop,phone,tablet":"","desktop,tablet":"(max-width: ".concat(a,"px)"),desktop:"(max-width: ".concat(i,"px)"),"phone,tablet":"(min-width: ".concat(c,"px)"),phone:"(min-width: ".concat(s,"px)"),"desktop,phone":"(max-width: ".concat(i,"px) and (min-width: ").concat(s,"px)"),tablet:"(min-width: ".concat(c,"px),(max-width: ").concat(a,"px)")},l="#wrap_".concat(this.blockId),d=u[o.join(",")],h=d?"@media ".concat(d,"{").concat(l,"{display:none}}"):"";p.M.addStyle("adfox_"+this.blockId,h)}}},{key:"canRun",value:function(){return m(S(s.prototype),"canRun",this).call(this)&&s.yaContextCbInit&&this.checkMediaWidth()}},{key:"run",value:function(){var t,e,r=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(m(S(s.prototype),"run",this).call(this,o),this.loadingFromAdfox)n.T.info("Уже запрашивается код из адфокс",this.blockId);else{this.loadingFromAdfox=!0,this.getLanchCode()();var a=parseInt(null===(t=this.format)||void 0===t||null===(e=t.params)||void 0===e?void 0:e.overloadAfterLoad);!isNaN(a)&&a>0&&(a=a<30?30:a,d.u.setInterval(this,"reloadCreative",(function(){r.isRun&&(n.T.log("Попытка перезагрузки креатива",r.blockId),i.G.publish("creativeReload",r.blockId))}),1e3*a))}}},{key:"getLanchCode",value:function(){var t,e=this;return this.container.id=this.containerId,"async"===this.params.type?t=function(){window.yaContextCb.push((function(){n.T.log("async_before",e.blockId),Ya.adfoxCode.create(e.bannerOptions),n.T.log("async_after",e.blockId)}))}:"adaptive"===this.params.type&&(t=function(){window.yaContextCb.push((function(){Ya.adfoxCode.createAdaptive(e.bannerOptions,e.params.bannerStates,e.params.adaptiveOptions)}))}),t}},{key:"getCurrentBidder",value:function(){var t;return null===(t=this.loadData)||void 0===t?void 0:t.winBidder}},{key:"creativeReload",value:function(){this.loadingFromAdfox?n.T.info("Уже запрашивается код из адфокс",this.blockId):(this.loadingFromAdfox=!0,Ya.adfoxCode.reload(this.containerId,{onlyIfWasVisible:!0}))}},{key:"reset",value:function(){var t,e;m(S(s.prototype),"reset",this).call(this),"function"==typeof(null===(t=window.Ya)||void 0===t||null===(e=t.adfoxCode)||void 0===e?void 0:e.destroy)&&(n.T.log("Дестрой креатива ADFOX",this.blockId),window.Ya.adfoxCode.destroy(this.containerId)),this.container&&(this.container.innerHTML="")}}],o=[{key:"initBefore",value:function(t){s.hideAdfoxHeaderBidding=!0===(null==t?void 0:t.hideAdfoxHeaderBidding),s.hideAdfoxContext=!0===(null==t?void 0:t.hideAdfoxContext),s.offAdfoxHeaderBidding=!0===(null==t?void 0:t.offAdfoxHeaderBidding);var e=setInterval((function(){void 0!==window.yaContextCb&&(s.yaContextCbInit=!0,clearInterval(e))}),4)}},{key:"initAfter",value:function(t){if(s.useCreativeOnPage){var e;if(!s.offAdfoxHeaderBidding){var r;window.YaHeaderBiddingSettings={biddersMap:t.adfoxBiddersMap,timeout:t.userTimeout},void 0!==t.syncPixels&&(window.YaHeaderBiddingSettings.syncPixels=t.syncPixels),s.adUnits.length>0&&(window.YaHeaderBiddingSettings.adUnits=s.adUnits);var n=null!==(r=window.srcHB)&&void 0!==r?r:"//yandex.ru/ads/system/header-bidding.js";s.hideAdfoxHeaderBidding||document.querySelector('script[src="'.concat(n,'"]'))||p.M.addTag("script",{src:n,async:!0}),s.bidders.indexOf("betweenDigital")>-1&&(p.M.addTag("link",{href:"//ads.betweendigital.com",crossorigin:!0}),d.u.addEventListener(this,"addBetweenScript",document,"DOMContentLoaded",(function(){p.M.addTag("script",{src:"//ads.betweendigital.com/sspmatch-js?p=42565&randsalt="+c(),async:!0},document.body,"beforeend")})))}window.Ya||(window.Ya={}),window.yaContextCb=window.yaContextCb||[],window.Ya.adfoxCode||(window.Ya.adfoxCode={}),window.Ya.adfoxCode.hbCallbacks||(window.Ya.adfoxCode.hbCallbacks=[]);var o=null!==(e=window.srcCONT)&&void 0!==e?e:"//yandex.ru/ads/system/context.js";s.hideAdfoxContext||document.querySelector('script[src*="'.concat(o,'"]'))||p.M.addTag("script",{src:o,async:!0})}}}],r&&b(e.prototype,r),o&&b(e,o),Object.defineProperty(e,"prototype",{writable:!1}),s}(a.n);k(j,"useCreativeOnPage",!1),k(j,"yaContextCbInit",!1),k(j,"adUnits",[]),k(j,"bidders",[]),k(j,"hideAdfoxHeaderBidding",!1),k(j,"hideAdfoxContext",!1),k(j,"offAdfoxHeaderBidding",!1);var T=r(714);function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function C(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==R(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===R(i)?i:String(i)),n)}var o,i}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=A(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},E.apply(this,arguments)}function x(t,e){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},x(t,e)}function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=A(t);if(e){var o=A(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===R(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function A(t){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},A(t)}var B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x(t,e)}(a,t);var e,r,o,i=I(a);function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,r=[{key:"validParams",value:function(t,e,r,o){return!!E(A(a.prototype),"validParams",this).call(this,t,e,r,o)&&(void 0===o.slots.vox?(n.T.err("Не задан id слота",t),!1):void 0!==o.cssPath||(n.T.err("Не задан путь к изображению",t),!1))}},{key:"canRun",value:function(){return E(A(a.prototype),"canRun",this).call(this)&&"loading"!==document.readyState}},{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(E(A(a.prototype),"run",this).call(this,t),void 0===window._tx){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//st.hbrd.io/ssp.js?t="+(new Date).getTime(),(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}window._tx=window._tx||{},window._tx.cmds=window._tx.cmds||[];var r={placeId:this.params.slots.vox,imageSelector:this.params.cssPath},n={};return this.params.canShowDuplicates&&(n.canShowDuplicates=!0),this.params.setDisplayBlock&&(n.setDisplayBlock=!0),window._tx.cmds.push((function(){window._tx.integrateInImage(r),window._tx.init(n)})),!0}}],r&&C(e.prototype,r),o&&C(e,o),Object.defineProperty(e,"prototype",{writable:!1}),a}(a.n);function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function N(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,U(n.key),n)}}function D(){return D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=H(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},D.apply(this,arguments)}function M(t,e){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},M(t,e)}function W(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=H(t);if(e){var o=H(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return q(this,r)}}function q(t,e){if(e&&("object"===L(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function H(t){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},H(t)}function F(t,e,r){return(e=U(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function U(t){var e=function(t,e){if("object"!==L(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===L(e)?e:String(e)}var Y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M(t,e)}(a,t);var e,r,o,i=W(a);function a(t,e,r,n,o){var c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(c=i.call(this,t,e,r,n,o))?(a.useCreativeOnPage=!0,q(c)):q(c,!1)}return e=a,r=[{key:"canRun",value:function(){return D(H(a.prototype),"canRun",this).call(this)&&a.yaContextCbInit}},{key:"run",value:function(){var t,e,r=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};D(H(a.prototype),"run",this).call(this,o),null!==(t=this.params)&&void 0!==t&&null!==(e=t.params)&&void 0!==e&&e.blockId?window.yaContextCb.push((function(){Ya.Context.AdvManager.render({type:"fullscreen",platform:"desktop",blockId:r.params.params.blockId,onError:function(t){n.T.err(t,r.blockId)},onRender:function(t){console.log(t)}})})):n.T.err("Не задан id для блока RTB",this.blockId)}}],o=[{key:"initBefore",value:function(t){a.hideAdfoxContext=!0===(null==t?void 0:t.hideAdfoxContext);var e=setInterval((function(){void 0!==window.yaContextCb&&(a.yaContextCbInit=!0,clearInterval(e))}),4)}},{key:"initAfter",value:function(t){if(a.useCreativeOnPage){var e;window.yaContextCb=window.yaContextCb||[];var r=null!==(e=window.srcCONT)&&void 0!==e?e:"//yandex.ru/ads/system/context.js";!0===(null==t?void 0:t.hideAdfoxContext)||document.querySelector('script[src*="'.concat(r,'"]'))||p.M.addTag("script",{src:r,async:!0})}}}],r&&N(e.prototype,r),o&&N(e,o),Object.defineProperty(e,"prototype",{writable:!1}),a}(a.n);function G(t){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(t)}function V(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==G(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===G(i)?i:String(i)),n)}var o,i}function z(t,e){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},z(t,e)}function $(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=K(t);if(e){var o=K(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===G(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function K(t){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},K(t)}F(Y,"useCreativeOnPage",!1),F(Y,"hideAdfoxContext",!1),F(Y,"yaContextCbInit",!1);var X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z(t,e)}(i,t);var e,r,n,o=$(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"run",value:function(){return p.M.addTag("script",{async:!0,src:"//cdn.al-adtech.com/ssp/sdk.js"}),!0}}])&&V(e.prototype,r),n&&V(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(a.n);function J(t){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}function Q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==J(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===J(i)?i:String(i)),n)}var o,i}function Z(){return Z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Z.apply(this,arguments)}function tt(t,e){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tt(t,e)}function et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=rt(t);if(e){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===J(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function rt(t){return rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rt(t)}var nt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tt(t,e)}(i,t);var e,r,n,o=et(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,r=[{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Z(rt(i.prototype),"run",this).call(this,t),function(t){var e=document.createElement("script");e.src="//cdn1.moe.video/player/mvplayer.min.js",e.onload=function(){addContentRoll({width:"100%",placement:t.slots.moevideo,promo:!0,advertCount:15,slot:"page",sound:"onclick",fly:{mode:"stick",position:"bottom-"+t.position,width:t.width,closeSecOffset:t.closeSecOffset}})},document.body.append(e)}(this.params)}}],r&&Q(e.prototype,r),n&&Q(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(a.n);function ot(t){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ot(t)}function it(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dt(n.key),n)}}function at(){return at="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ft(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},at.apply(this,arguments)}function ct(t,e){return ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ct(t,e)}function st(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ft(t);if(e){var o=ft(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ut(this,r)}}function ut(t,e){if(e&&("object"===ot(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return lt(t)}function lt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ft(t){return ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ft(t)}function pt(t,e,r){return(e=dt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dt(t){var e=function(t,e){if("object"!==ot(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ot(e)?e:String(e)}var ht=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ct(t,e)}(c,t);var e,r,o,a=st(c);function c(t,e,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),pt(lt(i=a.call(this,t,e,r,n,o)),"sources",[]),pt(lt(i),"curSource",-1),pt(lt(i),"ima",null),pt(lt(i),"videoElement",null),pt(lt(i),"adContainer",null),pt(lt(i),"adDisplayContainer",void 0),pt(lt(i),"adsLoader",void 0),pt(lt(i),"adsManager",void 0),pt(lt(i),"waitFirstTimePlay",!0),pt(lt(i),"playback",!1),lt(i)?(c.useCreativeOnPage=!0,i.sources=o.vastSrcs,ut(i)):ut(i,!1)}return e=c,r=[{key:"validParams",value:function(t,e,r,o){return!!at(ft(c.prototype),"validParams",this).call(this,t,e,r,o)&&("object"==ot(o.vastSrcs)&&0!==o.vastSrcs.length||(n.T.err("Не задан список источников VAST",t),!1))}},{key:"canRun",value:function(){var t;return at(ft(c.prototype),"canRun",this).call(this)&&!(null===(t=window.google)||void 0===t||!t.ima)}},{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isRun||(at(ft(c.prototype),"run",this).call(this,t),i.G.publish("creativeRender",this.blockId),this.initVast()),this.requestNextSrc()}},{key:"initVast",value:function(){var t,e,r,n=this;this.ima=window.google.ima,this.ima.settings.setVpaidMode(this.ima.ImaSdkSettings.VpaidMode.INSECURE);var o=null===(t=this.format)||void 0===t||null===(e=t.params)||void 0===e?void 0:e.height;o||(o=Math.floor(9*this.container.offsetWidth/16)),this.container.style.height=o+(null!==(r=this.format.params.unitsMeasurement)&&void 0!==r?r:"px"),this.container.innerHTML="",this.videoElement=p.M.addTag("video",{class:"adfinity-vast-video"},this.container,"beforeend"),this.adContainer=p.M.addTag("div",{class:"adfinity-vast-creative"},this.container,"beforeend"),this.adDisplayContainer=new this.ima.AdDisplayContainer(this.adContainer,this.videoElement),this.adDisplayContainer.initialize(),this.adsLoader=new this.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.addEventListener(this.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(t){return n.onAdsManagerLoaded(t)})),this.adsLoader.addEventListener(this.ima.AdErrorEvent.Type.AD_ERROR,(function(t){return n.onSrcLoadError(t)}))}},{key:"onAdsManagerLoaded",value:function(t){var e,r,o,i,a,c,s=this;n.T.log("vast. Источник ["+(null===(e=this.getCurrentSrc())||void 0===e?void 0:e.name)+"] загружен",this.blockId);var u,l=new this.ima.AdsRenderingSettings;null===(r=this.adsManager)||void 0===r||r.destroy(),this.adsManager=t.getAdsManager(this.videoElement,l),this.adsManager.setVolume(0),this.adsManager.addEventListener(this.ima.AdErrorEvent.Type.AD_ERROR,(function(t){return s.onCreativeLoadError(t)})),this.adsManager.addEventListener(this.ima.AdEvent.Type.LOADED,(function(t){return s.onCreativeLoaded(t)})),this.adsManager.addEventListener(this.ima.AdEvent.Type.STARTED,(function(t){return s.onStartPlay(t)})),this.adsManager.addEventListener(this.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(t){return s.onAllAdsCompleted(t)})),isNaN(null===(o=this.format)||void 0===o||null===(i=o.params)||void 0===i?void 0:i.height)||(this.videoElement.style.height=this.format.params.height+"px"),isNaN(null===(a=this.format)||void 0===a||null===(c=a.params)||void 0===c?void 0:c.width)||(this.videoElement.style.width=this.format.params.width+(null!==(u=this.format.params.unitsMeasurement)&&void 0!==u?u:"px")),this.adsManager.init(this.videoElement.clientWidth,this.videoElement.clientHeight,this.ima.ViewMode.NORMAL)}},{key:"onSrcLoadError",value:function(t){var e,r="vast. Источник ["+(null===(e=this.getCurrentSrc())||void 0===e?void 0:e.name)+"] - "+t.getError().getErrorCode()+": "+t.getError().getMessage();n.T.err(r,this.blockId),this.requestNextSrc()}},{key:"onCreativeLoadError",value:function(t){var e,r="vast. Источник ["+(null===(e=this.getCurrentSrc())||void 0===e?void 0:e.name)+"] - "+t.getError().getErrorCode()+": "+t.getError().getMessage();n.T.err(r,this.blockId)}},{key:"onCreativeLoaded",value:function(t){var e,r,o,i;n.T.log(null!==(e="vast. Креатив из источника ["+(null===(r=this.getCurrentSrc())||void 0===r?void 0:r.name)+"]  загружен: "+(null===(o=this.adsManager.getCurrentAd())||void 0===o||null===(i=o.data)||void 0===i?void 0:i.mediaUrl))&&void 0!==e?e:'" - не фрейм - "',this.blockId),this.adsManager.start()}},{key:"onStartPlay",value:function(t){n.T.log("Креатив vast запущен",this.blockId),this.playback=!0,i.G.publish("playbackHasStarted",this.blockId),this.waitFirstTimePlay&&(this.waitFirstTimePlay=!1,i.G.publish("firstTimePlay",this.blockId))}},{key:"requestAds",value:function(t){if(this.adsLoader){var e=new this.ima.AdsRequest;e.adTagUrl=t,this.adsLoader.requestAds(e)}}},{key:"onAllAdsCompleted",value:function(){"adfox_vast_kit"===this.format.params.kitRoles&&(!0===this.playback?(this.playback=!1,i.G.publish("playbackIsComplete",this.blockId)):this.requestNextSrc()),"vast_kit"===this.format.params.kitRoles&&this.requestNextSrc()}},{key:"requestNextSrc",value:function(){var t;if(this.curSource++,this.curSource>this.sources.length-1){if("vast_kit"!==this.format.params.kitRoles)return this.curSource=-1,this.waitFirstTimePlay=!0,void i.G.publish("vastPlaylistComplete",this.blockId);this.curSource=0}var e=this.insertLikMacros(this.getCurrentSrc().link);n.T.log("vast. Запрос источника "+this.curSource+"/"+this.sources.length+" ["+(null===(t=this.getCurrentSrc())||void 0===t?void 0:t.name)+"]",this.blockId),this.requestAds(e)}},{key:"getCurrentSrc",value:function(){return this.sources[this.curSource]}},{key:"getCurrentBidder",value:function(){var t;return null===(t=this.getCurrentSrc())||void 0===t?void 0:t.name}},{key:"insertLikMacros",value:function(t){return t=(t=t.replaceAll("[[url]]",encodeURIComponent(location.toString()))).replaceAll("[[domain]]",encodeURIComponent(location.hostname))}},{key:"reset",value:function(){var t,e,r;return this.waitFirstTimePlay=!0,this.curSource=-1,null===(t=this.adsManager)||void 0===t||t.destroy(),null===(e=this.adsLoader)||void 0===e||e.destroy(),null===(r=this.adDisplayContainer)||void 0===r||r.destroy(),at(ft(c.prototype),"reset",this).call(this)}}],o=[{key:"initAfter",value:function(t){var e="//imasdk.googleapis.com/js/sdkloader/ima3.js";c.useCreativeOnPage&&!document.querySelector('script[src="'.concat(e,'"]'))&&p.M.addTag("script",{src:e,async:!0})}}],r&&it(e.prototype,r),o&&it(e,o),Object.defineProperty(e,"prototype",{writable:!1}),c}(a.n);pt(ht,"useCreativeOnPage",!1);var yt={creatives:{_empty:a.n,adfox:j,experiment:T.f,vox:B,descktopFullscreen:Y,astralab:X,moevideo:nt,vast:ht},create:function(t,e,r,n,o){var i;return"function"==typeof this.creatives[n]?i=new this.creatives[n](t,e,r,n,o):(i=null,console.error("Нет креатива "+n)),i},initBefore:function(t){for(var e in this.creatives){var r,n;null===(r=(n=this.creatives[e]).initBefore)||void 0===r||r.call(n,t[e])}},initAfter:function(t){for(var e in this.creatives){var r,n;null===(r=(n=this.creatives[e]).initAfter)||void 0===r||r.call(n,t[e])}}};function vt(t){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vt(t)}function bt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gt(n.key),n)}}function mt(t,e,r){return(e=gt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gt(t){var e=function(t,e){if("object"!==vt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==vt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===vt(e)?e:String(e)}var wt=function(){function t(e,r,n,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),mt(this,"showPageName",void 0),mt(this,"storageType",void 0),mt(this,"countPageView",void 0),mt(this,"countPageViewOrder",void 0),mt(this,"timePageView",void 0),this.showPageName="shown_page_"+e,this.storageType=r?"local":"session",this.countPageView=parseInt(n),this.countPageViewOrder=parseInt(o),this.timePageView=parseInt(i)}var e,r,n;return e=t,(r=[{key:"check",value:function(){return this.checkFirstShow()&&this.checkNextShow()&&this.checkTimeBetweenShow()}},{key:"checkFirstShow",value:function(){var t;if(null!==(t=!isNaN(this.countPageView))&&void 0!==t?t:this.countPageView>0){var e=o.t[this.storageType](this.showPageName);if(void 0===e)return o.t[this.storageType](this.showPageName,this.countPageView-1),!1;if(e>0)return o.t[this.storageType](this.showPageName,e-1),!1}return!0}},{key:"checkNextShow",value:function(){if(!isNaN(this.countPageViewOrder)){var t="order_"+this.showPageName,e=o.t[this.storageType](t);if(void 0===e)o.t[this.storageType](t,this.countPageViewOrder);else{if(e>0)return o.t[this.storageType](t,e-1),!1;o.t[this.storageType](t,this.countPageViewOrder)}}return!0}},{key:"checkTimeBetweenShow",value:function(){if(!isNaN(this.timePageView)){var t="time_"+this.showPageName,e=o.t[this.storageType](t),r=Math.trunc(Date.now()/1e3);if(e){if(!(r-e>=this.timePageView))return!1;o.t[this.storageType](t,r)}else o.t[this.storageType](t,r)}return!0}}])&&bt(e.prototype,r),n&&bt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _t(t){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_t(t)}function Ot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kt(n.key),n)}}function St(t,e,r){return(e=kt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kt(t){var e=function(t,e){if("object"!==_t(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===_t(e)?e:String(e)}var Pt=function(){function t(e,r,n,o){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),St(this,"blockId",!1),St(this,"formatType",!1),St(this,"params",{}),St(this,"isRun",!1),St(this,"creatives",{}),St(this,"launchPermissions",{}),this.blockId=e,this.formatType=r,this.params=n,i.G.subscribe("blockReset",this.blockId,(function(){return a.reset()})),i.G.subscribe("switchOnExternalLaunch",this.blockId,(function(){return a.switchOnExternalLaunch()}));var c=this.params,s=new wt(this.blockId,c.storageLocal,c.countPageView,c.countPageViewOrder,c.timePageView);for(var u in s.check()||(this.launchPermissions.storedDisplayBanOnPage=!1),this.params.externalLaunchBan&&this.switchOnExternalLaunch(),o){var l=o[u];if(this.creatives[u]=yt.create(this.blockId,this,u,l.type,l.params),!this.creatives[u])return!1}i.G.publish("afterCreativesLoaded",this.blockId)}var e,r,o;return e=t,r=[{key:"switchOnExternalLaunch",value:function(){var t=this;this.launchPermissions.externalLaunchBan=!1,i.G.unsubscribe("externalLaunch",this.blockId),i.G.subscribe("externalLaunch",this.blockId,(function(){n.T.log("Внешний запуск",t.blockId),t.launchPermissions.externalLaunchBan=!0}),this)}},{key:"addToPage",value:function(){var t={};for(var e in this.creatives){var r,n,o,i=null!==(r=null===(n=(o=this.creatives[e]).addToPage)||void 0===n?void 0:n.call(o))&&void 0!==r?r:{};for(var a in i)t[a]=i[a]}return t}},{key:"canRun",value:function(){for(var t in this.launchPermissions)if(!1===this.launchPermissions[t])return!1;return this.canRunCreatives()}},{key:"canRunCreatives",value:function(){for(var t in this.creatives){var e,r;if(null===(e=(r=this.creatives[t]).canRun)||void 0===e||!e.call(r))return!1}return!0}},{key:"run",value:function(){return!this.isRun&&(this.isRun=!0,!0)}},{key:"launchCreative",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var e in this.creatives)this.creatives[e].run(t);return!0}},{key:"reset",value:function(){for(var t in this.creatives)this.creatives[t].reset();d.u.stopAllSchedulers(this),d.u.removeAllEventListeners(this),i.G.unsubscribeSubscriber(this),this.params.externalLaunchBan&&(this.launchPermissions.externalLaunchBan=!1),this.isRun=!1}}],r&&Ot(e.prototype,r),o&&Ot(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();function jt(t){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jt(t)}function Tt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bt(n.key),n)}}function Rt(){return Rt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=It(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Rt.apply(this,arguments)}function Ct(t,e){return Ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ct(t,e)}function Et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=It(t);if(e){var o=It(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===jt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return xt(t)}(this,r)}}function xt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function It(t){return It=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},It(t)}function At(t,e,r){return(e=Bt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Bt(t){var e=function(t,e){if("object"!==jt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===jt(e)?e:String(e)}var Lt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ct(t,e)}(s,t);var e,r,a,c=Et(s);function s(t,e,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),At(xt(o=c.call(this,t,e,r,n)),"wrapper",!1),At(xt(o),"wrapperComplit",!1),At(xt(o),"body",!1),At(xt(o),"infoblock",!1),i.G.subscribe("creativeRender",o.blockId,(function(t){return o.onCreativeRender(t)})),i.G.subscribe("creativeClose",o.blockId,(function(){return o.close()})),i.G.subscribe("creativeStub",o.blockId,(function(){return o.close()})),i.G.subscribe("creativeReload",o.blockId,(function(){return o.onCreativeReload()}),!0),o}return e=s,r=[{key:"run",value:function(){var t=this;if(!Rt(It(s.prototype),"run",this).call(this))return!1;var e="shown_"+this.blockId;if(this.params.dontShowTill){if(o.t.session(e))return!1;o.t.session(e,!0,this.params.dontShowTill)}if(this.params.closeWhenAppears){var r=document.querySelector(this.params.closeWhenAppears);r&&d.u.addEventListener(this,"closeWhenAppears",document,"scroll",(function(){var e=r.getBoundingClientRect().top-window.innerHeight;t.isRun&&e<0&&t.close()}))}return this.createWrapper(),this.isRun=!0,this.finishWrappingImmediately&&this.finishWrapping(),this.reloadAfterStart(),this.launchCreative(),!0}},{key:"createWrapper",value:function(){var t,e=this.getObjectToInsert();return!!e&&(e.insertAdjacentHTML(this.getInsertPosition(),this.htmlWrapper()),this.wrapper=document.getElementById(this.getWrapId()),this.body=this.wrapper.querySelector(".adfinity-body"),this.buildContanersList(),this.params.blockCaption&&(null===(t=this.wrapper.classList)||void 0===t||t.add(this.params.blockCaption)),this.insertInfoBlock(),this.wrapper)}},{key:"buildContanersList",value:function(){var t=this;this.wrapper.querySelectorAll(".adfinity-container").forEach((function(e){t.creatives[e.dataset.adfinityRole].container=e}))}},{key:"getObjectToInsert",value:function(){return document.body}},{key:"insertInfoBlock",value:function(){var t=this;d.u.setInterval(this,"updateInfoBlock",(function(){if(n.T.isLogsOn()){if(!t.infoblock){if(!t.body)return;t.body.insertAdjacentHTML("afterbegin",'<div class="adfinity-infoblock"></div>'),t.infoblock=t.body.querySelector(".adfinity-infoblock")}var e=[t.params.blockCaption].concat(t.getInfoBlockDataCreative());t.infoblock.innerHTML=e.join(". ")}else t.infoblock&&(t.infoblock.remove(),t.infoblock=!1)}),300)}},{key:"getInfoBlockDataCreative",value:function(){var t=[],e=Object.keys(this.creatives);if(e.length>0){var r=this.creatives[e[0]].getCurrentBidder();t.push(r)}return t}},{key:"getInsertPosition",value:function(){return"afterbegin"}},{key:"getWrapId",value:function(){return"wrap_"+this.blockId}},{key:"getWrapAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=["adfinity-wrap","adfinity-".concat(this.formatType)].concat(t);return this.params.mediaFormatType&&e.push("adfinity-media-format-type-".concat(this.params.mediaFormatType)),e=e.join(" "),'id="'.concat(this.getWrapId(),'" class="').concat(e,'"')}},{key:"htmlWrapper",value:function(){return"<div "+this.getWrapAttributes()+'><div class="adfinity-body">'+this.htmlContainers()+"</div></div>"}},{key:"htmlContainers",value:function(){var t="";for(var e in this.creatives)t+='<div class="adfinity-container" data-adfinity-role="'.concat(e,'"></div>');return t}},{key:"finishWrapping",value:function(t){var e,r=this;if(!this.wrapperComplit){this.wrapperComplit=!0,this.creativeData=t,this.showHeader(),this.params.width&&(this.wrapper.style.maxWidth=this.params.width+"px");var n=this.wrapper.querySelector(".adfinity-close");n&&(n.onclick=function(){return r.close()});var o=parseInt(this.params.height),i=null!==(e=this.params.unitsMeasurement)&&void 0!==e?e:"px";if(!isNaN(o))for(var a in this.creatives)this.creatives[a].container.style.maxHeight=o+i}}},{key:"showHeader",value:function(){var t,e=null!==(t=null==this?void 0:this.htmlHeader())&&void 0!==t?t:"";e&&!this.wrapper.querySelector(".adfinity-header")&&this.wrapper.insertAdjacentHTML("afterbegin",e)}},{key:"htmlHeader",value:function(){return""}},{key:"close",value:function(){i.G.publish("clickCloseBtn",this.blockId),i.G.publish("toResetBlock",this.blockId),this.reloadAfterClose()}},{key:"reset",value:function(){Rt(It(s.prototype),"reset",this).call(this),this.isRun=!1,this.wrapperComplit=!1,this.removeWrapper()}},{key:"removeWrapper",value:function(){this.wrapper&&this.wrapper.remove(),this.wrapper=!1,delete this.isWrap}},{key:"reloadAfterStart",value:function(){var t=this,e=parseInt(this.params.refreshAfterLoad);isNaN(e)||(this.launchPermissions.allowRefreshAfterLoad=!1,d.u.setInterval(this,"reloadAfterStart",(function(){n.T.log("Перезагрузка всего блока",t.blockId),i.G.publish("toResetBlock",t.blockId),t.launchPermissions.allowRefreshAfterLoad=!0}),1e3*e))}},{key:"reloadAfterClose",value:function(){var t=this;this.launchPermissions.allowedAfterClose=!1;var e=parseInt(this.params.refreshAfterClose);isNaN(e)||(this.launchPermissions.allowRefreshAfterClose=!1,this.launchPermissions.allowedAfterClose=!0,d.u.setTimeout(this,"reloadAfterClose",(function(){t.isRun||(t.launchPermissions.allowRefreshAfterClose=!0)}),1e3*e))}},{key:"switchOnPlaceholder",value:function(){if((!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.body.style.height=this.body.offsetHeight+"px",this.params.heightPlaceholder)){var t,e=null!==(t=this.params.unitsMeasurementPlaceholder)&&void 0!==t?t:"px";this.body.style.minHeight=this.params.heightPlaceholder+e}this.whetherShowPlaceholder()&&this.body.classList.add("adfox_placeholder")}},{key:"whetherShowPlaceholder",value:function(){return!0}},{key:"switchOffPlaceholder",value:function(){this.body.classList.remove("adfox_placeholder"),this.body.style.height=null}},{key:"onCreativeRender",value:function(t){this.finishWrapping(t),this.switchOffPlaceholder()}},{key:"onCreativeReload",value:function(){this.switchOnPlaceholder()}}],r&&Tt(e.prototype,r),a&&Tt(e,a),Object.defineProperty(e,"prototype",{writable:!1}),s}(Pt);function Nt(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Dt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dt(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Mt(t){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mt(t)}function Wt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gt(n.key),n)}}function qt(){return qt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},qt.apply(this,arguments)}function Ht(t,e){return Ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ht(t,e)}function Ft(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Yt(t);if(e){var o=Yt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Mt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ut(t)}(this,r)}}function Ut(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yt(t){return Yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Yt(t)}function Gt(t){var e=function(t,e){if("object"!==Mt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Mt(e)?e:String(e)}var Vt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ht(t,e)}(i,t);var e,r,n,o=Ft(i);function i(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return t=o.call.apply(o,[this].concat(c)),e=Ut(t),n=!0,(r=Gt(r="finishWrappingImmediately"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=i,r=[{key:"canRun",value:function(){return qt(Yt(i.prototype),"canRun",this).call(this)&&"object"==Mt(this.getObjectToInsert())}},{key:"createWrapper",value:function(){var t=qt(Yt(i.prototype),"createWrapper",this).call(this);if(!t)return!1;for(var e in this.creatives){var r=this.creatives[e].container;"vh"===this.params.unitsMeasurement&&(r.style.overflowY="hidden")}return this.switchOnPlaceholder(),this.params.infinityScroll&&this.cycleInsert(),t}},{key:"whetherShowPlaceholder",value:function(){var t;return!(null===(t=this.params)||void 0===t||!t.showPlaceholder)}},{key:"getObjectToInsert",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return"object"===Mt(this.params.objectToInsert)?!1===t?[this.params.objectToInsert]:this.params.objectToInsert:"xPath"===this.params.typeEmbedding?p.M.getObjectByXPath(this.params.cssPath,t):p.M.getObjectByPath(this.params.cssPath,t)}},{key:"getInsertPosition",value:function(){return this.params.cssPosition}},{key:"cycleInsert",value:function(){var t=this;this.listAditionalBlocks=new Set,this.chainInfinityScroll=[this],d.u.setInterval(this,"infinityScrollClone",(function(){if(t.isRun){var e,r=window.adfinity.block(t.blockId),n=Nt(t.getObjectToInsert(!1));try{for(n.s();!(e=n.n()).done;){var o=e.value;if(0===t.listAditionalBlocks.size&&t.listAditionalBlocks.add(o),!t.listAditionalBlocks.has(o)){t.listAditionalBlocks.add(o);var i=f(r.props);for(var a in i.blockId=t.blockId+"-"+(t.listAditionalBlocks.size+1),i.creatives)"string"==typeof i.creatives[a].params.containerId&&(i.creatives[a].params.containerId+="-"+(t.listAditionalBlocks.size+1));delete i.formatParams.cssPath,delete i.formatParams.infinityScroll,i.formatParams.objectToInsert=o;var c=window.adfinity.loadBlock(i);c&&(t.chainInfinityScroll.push(c.format),c.format.chainInfinityScroll=t.chainInfinityScroll)}}}catch(t){n.e(t)}finally{n.f()}}}),200)}}],r&&Wt(e.prototype,r),n&&Wt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(Lt);function zt(t){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zt(t)}function $t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==zt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===zt(i)?i:String(i)),n)}var o,i}function Kt(){return Kt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Kt.apply(this,arguments)}function Xt(t,e){return Xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Xt(t,e)}function Jt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Qt(t);if(e){var o=Qt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===zt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Qt(t){return Qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qt(t)}var Zt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xt(t,e)}(i,t);var e,r,n,o=Jt(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"createWrapper",value:function(t){var e=this,r=Kt(Qt(i.prototype),"createWrapper",this).call(this);if(r){var n=parseInt(this.params.topStickToTop);n=n||0,r.style.position="static",d.u.addEventListener(this,"setStickPoint",window,"DOMContentLoaded",(function(){return s(r).top}));var o=!1;d.u.addEventListener(this,"changeStateTopsticky",window,"scroll",(function(){if(!o){var t=s(r).top,i=window.scrollY,a="fixed"===r.style.position;t-i<n&&!a&&(o=!0,r.style.width=r.clientWidth+"px",r.style.position="fixed",r.style.top=n+"px",d.u.setTimeout(e,"setTopStickyStatic",(function(){r.style.position="static"}),1e3*e.params.topStickTime))}}))}return r}}])&&$t(e.prototype,r),n&&$t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(Vt);function te(t){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},te(t)}function ee(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,se(n.key),n)}}function re(){return re="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ae(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},re.apply(this,arguments)}function ne(t,e){return ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ne(t,e)}function oe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ae(t);if(e){var o=ae(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===te(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ie(t)}(this,r)}}function ie(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ae(t){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ae(t)}function ce(t,e,r){return(e=se(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function se(t){var e=function(t,e){if("object"!==te(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===te(e)?e:String(e)}var ue=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ne(t,e)}(i,t);var e,r,n,o=oe(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return ce(ie(t=o.call.apply(o,[this].concat(r))),"stopScrollStatus",1),ce(ie(t),"scrollProgress",0),ce(ie(t),"lastCoordScrollY",!1),ce(ie(t),"deltaTouchMove",0),ce(ie(t),"wasTouch",!1),t}return e=i,(r=[{key:"run",value:function(){return!!re(ae(i.prototype),"run",this).call(this)&&(void 0!==this.params.stopScroll&&this.initStopScroll(),!0)}},{key:"htmlWrapper",value:function(){return void 0!==this.params.stopScroll?"<div ".concat(this.getWrapAttributes(),">")+'<div class="adfinity-shell-progressbar"><div class="adfinity-stopScroll-progressbar"></div></div>'+'<div class="adfinity-body">'.concat(this.htmlContainers(),"</div></div>"):re(ae(i.prototype),"htmlWrapper",this).call(this)}},{key:"initStopScroll",value:function(){this.shellProgressbar=this.wrapper.querySelector(".adfinity-shell-progressbar"),this.progressbar=this.wrapper.querySelector(".adfinity-stopScroll-progressbar"),this.getTopDelta()<0&&this.setStatus(3),this.initEvents(),this.initStyles()}},{key:"initEvents",value:function(){var t=this;d.u.addEventListener(this,"touchstart",window,"touchstart",(function(e){t.lastCoordScrollY=e.touches[0].clientY,t.wasTouch=!0})),d.u.addEventListener(this,"touchmove",window,"touchmove",(function(e){!1!==t.lastCoordScrollY?(t.deltaTouchMove=e.touches[0].clientY-t.lastCoordScrollY,t.lastCoordScrollY=e.touches[0].clientY,t.statusProcessing()):t.lastCoordScrollY=e.touches[0].clientY})),d.u.addEventListener(this,"touchend",window,"touchend",(function(){return t.lastCoordScrollY=!1})),d.u.addEventListener(this,"touchcancel",window,"touchcancel",(function(){return t.lastCoordScrollY=!1})),d.u.addEventListener(this,"scroll",window,"scroll",(function(){return t.onScrollWindow()})),d.u.setInterval(this,"updateHeigthProgressBar",(function(){return t.renderProgressBar()}),50)}},{key:"createWrapper",value:function(){var t=re(ae(i.prototype),"createWrapper",this).call(this);if(t){var e,r=parseInt(this.params.height),n=null!==(e=this.params.unitsMeasurement)&&void 0!==e?e:"px";isNaN(r)||(this.body.style.height=r+n)}return t}},{key:"initStyles",value:function(){var t=[],e=[];this.params.stopScrollPBbgcolor&&e.push("background-color:".concat(this.params.stopScrollPBbgcolor)),this.params.stopScrollPBwidth&&e.push("width:".concat(this.params.stopScrollPBwidth,"px")),e.length>0&&t.push("#".concat(this.getWrapId()," .adfinity-shell-progressbar{").concat(e.join(";"),"}")),this.params.stopScrollPBcolor&&t.push("#".concat(this.getWrapId()," .adfinity-stopScroll-progressbar{background-color:").concat(this.params.stopScrollPBcolor,"}")),t.length>0&&p.M.addStyle("stopScroll"+this.blockId,t.join(""))}},{key:"statusProcessing",value:function(){var t=this.getTopDelta(),e=1;switch(this.stopScrollStatus){case 1:t<=0&&(e=2);break;case 2:this.processProgress(),e=0===this.scrollProgress?1:1===this.scrollProgress?3:2;break;case 3:e=t>0?2:3}e!==this.stopScrollStatus&&this.setStatus(e),2==e&&this.scrollToTop()}},{key:"getTopDelta",value:function(){return Math.round(this.wrapper.getBoundingClientRect().top)}},{key:"setStatus",value:function(t){this.wrapper.dataset.stopScrollStatus=t,this.stopScrollStatus=t,2==t?(document.body.classList.add("adfinity-stopScrollBody"),this.scrollToTop()):document.body.classList.remove("adfinity-stopScrollBody"),1===t?this.scrollProgress=0:3===t&&(this.scrollProgress=1),this.processProgress()}},{key:"processProgress",value:function(){this.scrollProgress=this.scrollProgress-this.deltaTouchMove/(window.innerHeight*this.params.stopScrollHeight/100),this.scrollProgress>1&&(this.scrollProgress=1),this.scrollProgress<0&&(this.scrollProgress=0),this.renderProgressBar()}},{key:"renderProgressBar",value:function(){this.progressbar.style.height=this.scrollProgress*this.body.offsetHeight+"px",this.shellProgressbar.style.height=this.wrapper.offsetHeight+"px"}},{key:"scrollToTop",value:function(){var t=this.getTopDelta();0!=t&&window.scrollTo(0,t+window.scrollY)}},{key:"onScrollWindow",value:function(){if(this.wasTouch&&!1===this.lastCoordScrollY){var t=this.getTopDelta();(3===this.stopScrollStatus&&t>0||1===this.stopScrollStatus&&t<0)&&this.setStatus(2)}}}])&&ee(e.prototype,r),n&&ee(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(Vt);function le(t){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},le(t)}function fe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,me(n.key),n)}}function pe(){return pe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ve(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},pe.apply(this,arguments)}function de(t,e){return de=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},de(t,e)}function he(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ve(t);if(e){var o=ve(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===le(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ye(t)}(this,r)}}function ye(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ve(t){return ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ve(t)}function be(t,e,r){return(e=me(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function me(t){var e=function(t,e){if("object"!==le(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===le(e)?e:String(e)}var ge=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&de(t,e)}(i,t);var e,r,n,o=he(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return be(ye(t=o.call.apply(o,[this].concat(r))),"blockNext",!1),be(ye(t),"stateBlock","stateFirst"),t}return e=i,(r=[{key:"createWrapper",value:function(){var t=pe(ve(i.prototype),"createWrapper",this).call(this);return this.params.topStick&&this.elStickyTop(t),t}},{key:"htmlWrapper",value:function(){return"<div ".concat(this.getWrapAttributes(),">")+'<div id="stick_'.concat(this.blockId,'" class="adfinity-inner-').concat(this.formatType,'"><div class="adfinity-body">').concat(this.htmlContainers(),"</div></div>")+"</div>"}},{key:"elStickyTop",value:function(t){var e=this,r=this.wrapper.firstChild,n=parseInt(this.params.topStickToTop);n=n||0;var o=!1;t.style.position="static",t.style.background="#F5FCFF00",r.style.position="static",d.u.setInterval(this,"placeholderHeight",(function(){t.style.height=t.querySelector(".adfinity-body").clientHeight+"px",o=u(t).top}),50),d.u.addEventListener(this,"changeStateSidebar",document,"scroll",(function(){var t=e.getStateBlock(n);if("stateFirst"===t&&(r.style.position="static",r.style.top="0px"),"stateSecond"===t&&(r.style.width=r.clientWidth+"px",r.style.position="fixed",r.style.zIndex=1e3,r.style.top=n+"px"),"stateThird"===t){r.style.position="relative";var i=!1,a=e.getBlockNext();a?i=u(a.wrapper).top-o-r.clientHeight-n:e.params.stopStick&&null!==document.querySelector(e.params.stopStick)&&(i=u(document.querySelector(e.params.stopStick)).top-n-o-r.clientHeight),r.style.top=i+"px"}}))}},{key:"getStateBlock",value:function(t){if(l(this.wrapper).top>0)return"stateFirst";var e=this.getBlockNext(),r=this.wrapper.clientHeight;return e||this.params.stopStick?!e&&this.params.stopStick?null!==document.querySelector(this.params.stopStick)&&u(document.querySelector(this.params.stopStick)).top-t-window.scrollY<=r?"stateThird":"stateSecond":e?l(e.wrapper).top-2*t>r?"stateSecond":"stateThird":void 0:"stateSecond"}},{key:"getBlockNext",value:function(){if(this.blockNext)return this.blockNext;if(!this.chainInfinityScroll)return this.blockNext=!1,this.blockNext;var t=this.chainInfinityScroll.length;for(var e in this.chainInfinityScroll)if(this.chainInfinityScroll[e].blockId===this.blockId&&e<=t-2)return this.blockNext=this.chainInfinityScroll[Number(e)+1],this.blockNext}}])&&fe(e.prototype,r),n&&fe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(Vt);function we(t){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},we(t)}function _e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==we(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==we(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===we(i)?i:String(i)),n)}var o,i}function Oe(){return Oe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=je(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Oe.apply(this,arguments)}function Se(t,e){return Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Se(t,e)}function ke(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=je(t);if(e){var o=je(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===we(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Pe(t)}(this,r)}}function Pe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function je(t){return je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},je(t)}var Te=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Se(t,e)}(i,t);var e,r,n,o=ke(i);function i(t,e,r,n){var a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),a=o.call(this,t,e,r,n);var c=parseInt(a.params.startTime),s=parseInt(a.params.startScrollTop);return isNaN(c)&&isNaN(s)||(a.launchPermissions.allowWhenPageEvent=!1,isNaN(c)||d.u.setTimeout(Pe(a),"delayedLaunch",(function(){return a.launchPermissions.allowWhenPageEvent=!0}),1e3*c),isNaN(s)||d.u.addEventListener(Pe(a),"startScrollTop",document,"scroll",(function(){window.scrollY>=s&&(a.launchPermissions.allowWhenPageEvent=!0)}))),a}return e=i,(r=[{key:"canRun",value:function(){if("interactive"===document.readyState||"complete"===document.readyState)return Oe(je(i.prototype),"canRun",this).call(this)}},{key:"getInsertPosition",value:function(){var t="afterbegin";return void 0!==this.params.positionInBody&&(t="beforeEnd"),t}},{key:"showHeader",value:function(){var t;Oe(je(i.prototype),"showHeader",this).call(this),!1!==this.params.blur&&(null===(t=this.turnOnBlur)||void 0===t||t.call(this)),this.createTimer(this.params.canCloseAfter)}},{key:"turnOnBlur",value:function(){var t=this.wrapper.querySelector(".adfinity-body");t&&(t.style.backdropFilter="blur("+this.params.blur+"px)",CSS.supports("-webkit-backdrop-filter","blur("+this.params.blur+"px)")&&(t.style.webkitBackdropFilter="blur("+this.params.blur+"px)"))}},{key:"createTimer",value:function(t){var e=this,r=this.wrapper;if(this.timeToClose=parseInt(t),!isNaN(this.timeToClose)){r.classList.add("adfinity-show-to-close");var n=r.querySelector(".adfinity-to-close-num");n&&(n.innerText=this.timeToClose.toString()),d.u.setInterval(this,"timerId",(function(){--e.timeToClose<0?(d.u.stopScheduler(e,"timerId"),r.classList.remove("adfinity-show-to-close"),e.params.autoClose&&e.close()):n&&(n.innerText=e.timeToClose.toString())}),1e3)}}}])&&_e(e.prototype,r),n&&_e(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(Lt);function Re(t){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Re(t)}function Ce(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Re(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Re(i)?i:String(i)),n)}var o,i}function Ee(){return Ee="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ae(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Ee.apply(this,arguments)}function xe(t,e){return xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xe(t,e)}function Ie(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ae(t);if(e){var o=Ae(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Re(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ae(t){return Ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ae(t)}var Be=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xe(t,e)}(i,t);var e,r,n,o=Ie(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"htmlHeader",value:function(t){return this.showHead()?(this.wrapper.classList.add("adfinity-z-index"),document.querySelector("body").classList.add("adfinity-overflow-hidden"),'<div class="adfinity-header"><div class="adfinity-to-close"><span>До закрытия блока </span><div class="adfinity-to-close-num"></div></div><div class="adfinity-progress-line"></div><div class="adfinity-close"></div></div>'):""}},{key:"createWrapper",value:function(){var t=Ee(Ae(i.prototype),"createWrapper",this).call(this);return!!t&&(this.showHead()||this.wrapper.querySelector(".adfinity-body").classList.add("adfinity-body-no-shadow"),t)}},{key:"createTimer",value:function(t){var e=this;if(Ee(Ae(i.prototype),"createTimer",this).call(this,t),!isNaN(this.timeToClose)&&this.showHead()){var r=this.wrapper.querySelector(".adfinity-progress-line");if(r){var n=10/this.timeToClose;d.u.setInterval(this,"timerLine",(function(){r.style.width=Number(r.style.width.replace("%",""))+n+"%",e.timeToClose<0&&(d.u.stopScheduler(e,"timerLine"),r.style.width="100%")}),100)}}}},{key:"showHead",value:function(){var t;return this.params.wrapForever||!(null===(t=this.creativeData)||void 0===t||!t.mustShowWrap)}},{key:"reset",value:function(){var t,e;null===(t=this.wrapper)||void 0===t||null===(e=t.classList)||void 0===e||e.remove("adfinity-z-index"),document.querySelector("body").classList.remove("adfinity-overflow-hidden"),Ee(Ae(i.prototype),"reset",this).call(this)}}])&&Ce(e.prototype,r),n&&Ce(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(Te);function Le(t){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Le(t)}function Ne(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ue(n.key),n)}}function De(){return De="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=He(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},De.apply(this,arguments)}function Me(t,e){return Me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Me(t,e)}function We(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=He(t);if(e){var o=He(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Le(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return qe(t)}(this,r)}}function qe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function He(t){return He=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},He(t)}function Fe(t,e,r){return(e=Ue(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ue(t){var e=function(t,e){if("object"!==Le(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Le(e)?e:String(e)}var Ye=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Me(t,e)}(c,t);var e,r,o,a=We(c);function c(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Fe(qe(t=a.call.apply(a,[this].concat(r))),"substrateNode",null),Fe(qe(t),"activeRole",!1),t}return e=c,r=[{key:"createWrapper",value:function(){return!!De(He(c.prototype),"createWrapper",this).call(this)&&(this.params.position&&this.wrapper.classList.add("adfinity-position-"+this.params.position),this.wrapper)}},{key:"htmlHeader",value:function(t){var e="";return this.params.positionPanelClose&&(e="adfinity-header-position-".concat(this.params.positionPanelClose)),'<div class="adfinity-header '.concat(e,'">')+'<div class="adfinity-to-close"><div class="adfinity-to-close-num"></div></div><div class="adfinity-close"></div></div>'}},{key:"finishWrapping",value:function(){De(He(c.prototype),"finishWrapping",this).call(this),this.renderSubstrate()}},{key:"getInfoBlockDataCreative",value:function(){var t=[];if(this.activeRole){var e=this.creatives[this.activeRole];t=[e.creativeType,e.getCurrentBidder()]}return t}},{key:"renderSubstrate",value:function(){if(!this.params.hideBottomSubstrate){var t=this.wrapper.querySelector(".adfinity-body");this.substrateNode||(document.body.insertAdjacentHTML("beforeend",'<div id="adfinity-overlay-substrate"></div>'),this.substrateNode=document.getElementById("adfinity-overlay-substrate")),this.substrateNode.style.height=getComputedStyle(t).height}}},{key:"launchCreative",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.kitRoles=this.params.kitRoles,"adfox_vast_kit"==this.params.kitRoles?(i.G.subscribe("playbackHasStarted",this.blockId,(function(){return t.switchToVast()}),this),i.G.subscribe("vastPlaylistComplete",this.blockId,(function(){return t.launchTimer()}),this),i.G.subscribe("playbackIsComplete",this.blockId,(function(){return t.switchToAdfox()}),this),this.launchAdfox()):(this.activeRole="adfox_role",De(He(c.prototype),"launchCreative",this).call(this,e))}},{key:"launchAdfox",value:function(){return this.activeRole="adfox_role",n.T.log("Запуск креатива Adfox",this.blockId),this.wrapper.classList.add("adfinity-hide-vast"),this.creatives.adfox_role.run(),this.launchTimer(),!0}},{key:"launchTimer",value:function(){var t=this;d.u.setTimeout(this,"delayToRunVast",(function(){t.launchSearchVast()}),1e3*parseInt(this.params.previousBlockTime))}},{key:"launchSearchVast",value:function(){this.creatives.vast_role.run()}},{key:"switchToVast",value:function(){this.activeRole="vast_role",this.switchOnPlaceholder(),this.creatives.adfox_role.reset(),this.wrapper.classList.remove("adfinity-hide-vast"),this.switchOffPlaceholder()}},{key:"switchToAdfox",value:function(){this.launchAdfox()}},{key:"reset",value:function(){this.substrateNode&&this.substrateNode.remove(),De(He(c.prototype),"reset",this).call(this)}}],r&&Ne(e.prototype,r),o&&Ne(e,o),Object.defineProperty(e,"prototype",{writable:!1}),c}(Te);function Ge(t){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ge(t)}function Ve(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Ge(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Ge(i)?i:String(i)),n)}var o,i}function ze(t,e){return ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ze(t,e)}function $e(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ke(t);if(e){var o=Ke(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ge(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ke(t){return Ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ke(t)}var Xe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ze(t,e)}(i,t);var e,r,n,o=$e(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,r&&Ve(e.prototype,r),n&&Ve(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(ue);function Je(t){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Je(t)}function Qe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Je(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Je(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Je(i)?i:String(i)),n)}var o,i}function Ze(){return Ze="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rr(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Ze.apply(this,arguments)}function tr(t,e){return tr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tr(t,e)}function er(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=rr(t);if(e){var o=rr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Je(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function rr(t){return rr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rr(t)}function nr(t){return nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nr(t)}function or(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==nr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==nr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===nr(i)?i:String(i)),n)}var o,i}function ir(t,e){return ir=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ir(t,e)}function ar(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=cr(t);if(e){var o=cr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===nr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function cr(t){return cr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},cr(t)}var sr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ir(t,e)}(i,t);var e,r,n,o=ar(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,r&&or(e.prototype,r),n&&or(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tr(t,e)}(i,t);var e,r,n,o=er(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"run",value:function(){if(!Ze(rr(i.prototype),"run",this).call(this))return!1;this.launchCreative()}}])&&Qe(e.prototype,r),n&&Qe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(Pt));function ur(t){return ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ur(t)}function lr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==ur(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ur(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===ur(i)?i:String(i)),n)}var o,i}function fr(){return fr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yr(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},fr.apply(this,arguments)}function pr(t,e){return pr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pr(t,e)}function dr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=yr(t);if(e){var o=yr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ur(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return hr(t)}(this,r)}}function hr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yr(t){return yr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yr(t)}var vr={formats:{overlay:Ye,fullscreen:Be,content:ue,sidebar:ge,trap:function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pr(t,e)}(i,t);var e,r,n,o=dr(i);function i(t,e,r,n){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(a=o.call(this,t,e,r,n)).params.switchOnInternalLinkBlock&&(a.finishWrappingImmediately=!0),a.launchPermissions.trapShow=!1,d.u.addEventListener(hr(a),"mouseOverTop",window,"mousemove",(function(t){t.y<=50&&(a.launchPermissions.trapShow=!0)})),a}return e=i,(r=[{key:"canRun",value:function(){return fr(yr(i.prototype),"canRun",this).call(this)&&window.innerWidth>this.params.widthDevice}},{key:"createWrapper",value:function(){var t=fr(yr(i.prototype),"createWrapper",this).call(this);return t&&d.u.setTimeout(this,"forTrap",(function(){return t.classList.remove("adfinity-trap-hidden")}),0),t}},{key:"htmlWrapper",value:function(){var t,e=this.params.switchOnInternalLinkBlock?this.renderInternalLink():"",r=this.params.switchOnAdvertBlock?this.htmlContainers():"";return t="internalLink"===this.params.whichBlockFirst?e+r:r+e,"<div ".concat(this.getWrapAttributes(["adfinity-trap-hidden"]),'><div class="adfinity-body">').concat(t,"</div></div>")}},{key:"renderInternalLink",value:function(){var t=this.params.internalLinkList[Math.floor(Math.random()*this.params.internalLinkList.length)],e=this.params.position,r=["full"===e?"":".adfinity-trap-hidden{".concat(e,":-").concat(this.params.width-5,"px!important}"),".adfinity-trap-content{background-color:".concat(this.params.colorBackground,"}"),".adfinity-trap-title{color:".concat(this.params.colorTitle,"}"),".adfinity-trap-description{color:".concat(this.params.colorDecription,"}"),".adfinity-trap-button{color:".concat(this.params.colorBtnTxt,";background-color:").concat(this.params.colorBtn,"}"),".adfinity-trap-img{background-image:url('".concat(t.image,"')!important}")];p.M.addStyle("trap",r.join(""));var n='<div class="adfinity-trap-title">'.concat(t.title,"</div>"),o=t.description?'<div class="adfinity-trap-description">'.concat(t.description,"</div>"):"",i='<div class="adfinity-trap-text">'.concat(n).concat(o).concat('<div class="adfinity-trap-button">Читать статью</div>',"</div>");return'<a href="'.concat(t.url,'" class="adfinity-trap-content">').concat(i).concat('<div class="adfinity-trap-img-block"><div class="adfinity-trap-img"></div></div>',"</a>")}}])&&lr(e.prototype,r),n&&lr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(Ye),topSticky:Zt,rv:Xe,nowrap:sr},create:function(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return"function"==typeof this.formats[e]?r=new this.formats[e](t,e,n,o):(r=null,console.error("Нет формата "+e)),r}};function br(t){return br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},br(t)}function mr(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return gr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gr(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function gr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function wr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Or(n.key),n)}}function _r(t,e,r){return(e=Or(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Or(t){var e=function(t,e){if("object"!==br(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==br(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===br(e)?e:String(e)}var Sr=function(){function t(e){var r,o=this;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),_r(this,"initialized",!1),_r(this,"run",!1),_r(this,"blockId",!1),_r(this,"blockCaption",!1),_r(this,"mediaFormatType",!1),_r(this,"format",!1),_r(this,"styles",!1),this.blockId=e.blockId,this.blockCaption=e.blockCaption,this.mediaFormatType=null!==(r=e.mediaFormatType)&&void 0!==r?r:"D",this.props=e,this.checkUrl(e.urlsForbidden,e.urlsAllowed)||n.T.info("Не выводить блок на этой странице",this),this.checkWidthWindow(e.widthWindowToShow)||n.T.info("Не выводить блок при текущей ширине экрана",this),this.validParams(e)?(e.formatParams.mediaFormatType=this.mediaFormatType,e.formatParams.blockCaption=this.blockCaption,this.format=vr.create(this.blockId,e.formatType,e.formatParams,e.creatives),!!this.format&&(i.G.publish("afterFormatLoaded",this.blockId),i.G.subscribe("toResetBlock",this.blockId,(function(){return o.reset()})),void(this.initialized=!0))):(n.T.err("Не валидные параметры",this),!1)}var e,r,o;return e=t,r=[{key:"checkUrl",value:function(t,e){var r=!0,n=window.location.href.split(window.location.host)[1];if(Array.isArray(e)&&e.length>0){r=!1;var o,i=mr(e);try{for(i.s();!(o=i.n()).done;){var a=o.value,c=new RegExp(a);if(n.match(c)){r=!0;break}}}catch(t){i.e(t)}finally{i.f()}}if(!0===r&&Array.isArray(t)&&t.length>0){var s,u=mr(t);try{for(u.s();!(s=u.n()).done;){var l=s.value,f=new RegExp(l);if(n.match(f)){r=!1;break}}}catch(t){u.e(t)}finally{u.f()}}return r}},{key:"checkWidthWindow",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=!t.min||t.min<window.innerWidth,r=!t.max||window.innerWidth<=t.max;return e&&r}},{key:"validParams",value:function(t){var e=!1;return t.blockId?t.formatType?t.formatParams?("object"!=br(t.creatives)||t.creatives.length<1)&&(e="Не заданы параметры креативов"):e="Не заданы параметры формата":e="Не задан формат":e="Не задан blockId",!1===e||(n.T.err(e,this),!1)}},{key:"addToPage",value:function(){return this.format.addToPage()}},{key:"tryRun",value:function(){return this.run?"alreadyRun":!(!this.getCanShowOnPage()||!this.format.canRun()||(n.T.log("Запуск блока",this),this.format.run(),this.run=!0,this.initStyles(this.props.styles),0))}},{key:"getCanShowOnPage",value:function(){return this.checkWidthWindow(this.props.widthWindowToShow)&&this.checkUrl(this.props.urlsForbidden,this.props.urlsAllowed)}},{key:"initStyles",value:function(t){t&&p.M.addStyle("block_"+this.blockId,t)}},{key:"reset",value:function(){d.u.stopAllSchedulers(this),d.u.removeAllEventListeners(this),this.format.reset(),this.run=!1,n.T.log("Блок выгружен",this.blockId)}}],r&&wr(e.prototype,r),o&&wr(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();function kr(t){return kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kr(t)}function Pr(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return jr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jr(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function jr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Tr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cr(n.key),n)}}function Rr(t,e,r){return(e=Cr(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cr(t){var e=function(t,e){if("object"!==kr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==kr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===kr(e)?e:String(e)}(function(){function t(e){var r=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Rr(this,"blocks",new Map),Rr(this,"listAddToPage",new Map),p.M.init(),!p.M.checkDomain(e.domains)||!p.M.checkUrlForShow(e.url_exception))return!1;yt.initBefore(e.creatives),this.loadBlocks(e.siteConfig.blocks),yt.initAfter(e.creatives),this.loadStyles(e),d.u.setInterval(this,"mainCycleOfBlocks",(function(){return r.tryRunBlocks()}),50),e.is_spa&&this.reloadApplicationIfPageChange()}var e,r,a;return e=t,a=[{key:"startApplication",value:function(){window.adfinity=new this(window.adfinityData)}}],(r=[{key:"block",value:function(t){return this.blocks.get(t)}},{key:"loadBlocks",value:function(t){var e,r=Pr(t);try{for(r.s();!(e=r.n()).done;){var n=e.value;2==n.active&&this.loadBlock(n)}}catch(t){r.e(t)}finally{r.f()}}},{key:"loadBlock",value:function(t){if(!this.blocks.has(t.blockId)){var e=new Sr(t);if(e.initialized)return this.blocks.set(e.blockId,e),this.addToPage(e),e}return!1}},{key:"addToPage",value:function(t){var e,r,n=null!==(e=null===(r=t.addToPage)||void 0===r?void 0:r.call(t))&&void 0!==e?e:{};for(var o in n)if(!this.listAddToPage.has(o)){var i,a,c=n[o];"function"==typeof c&&c(),"object"==kr(c)&&c.tag&&p.M.addTag(c.tag,c.attrs,null!==(i=c.el)&&void 0!==i?i:null,null!==(a=c.pos)&&void 0!==a?a:null),this.listAddToPage.set(o,c)}}},{key:"tryRunBlocks",value:function(){this.blocks.forEach((function(t){var e;return null===(e=t.tryRun)||void 0===e?void 0:e.call(t)}))}},{key:"loadStyles",value:function(t){var e={href:t.staticUrl+"/css/adfinity.css",rel:"stylesheet",charset:"utf-8"};p.M.addTag("link",e)}},{key:"logs",value:function(){return n.T}},{key:"infOn",value:function(){n.T.on()}},{key:"infOff",value:function(){n.T.off()}},{key:"storage",value:function(){return o.t}},{key:"event",value:function(){return i.G}},{key:"reset",value:function(){this.blocks.forEach((function(t){i.G.unsubscribeBlock(t.blockId),t.reset()})),d.u.stopAllSchedulers(this),delete window.adfinity}},{key:"reloadApplicationIfPageChange",value:function(){var e=this;d.u.setInterval(this,"checkPageChange",(function(){p.M.hasChangedCurrentPage()&&(e.reset(),t.startApplication())}),10)}}])&&Tr(e.prototype,r),a&&Tr(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t})().startApplication()},714:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{f:()=>CreativeExperiment});var _base_BaseCreative__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(906),_utils_page__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(307),_utils_logs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(705),_utils_resources__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(958);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=_superPropBase(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},_get.apply(this,arguments)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}var CreativeExperiment=function(_BaseCreative){_inherits(CreativeExperiment,_BaseCreative);var _super=_createSuper(CreativeExperiment);function CreativeExperiment(){return _classCallCheck(this,CreativeExperiment),_super.apply(this,arguments)}return _createClass(CreativeExperiment,[{key:"canRun",value:function canRun(){var _this$params$addition;if(!_get(_getPrototypeOf(CreativeExperiment.prototype),"canRun",this).call(this))return!1;var addCondition=null===(_this$params$addition=this.params.additional_insertion_condition)||void 0===_this$params$addition?void 0:_this$params$addition.replace(/^\s+|\s+$/gm,"");if(addCondition)try{if(!eval(addCondition))return!1}catch(t){return _utils_logs__WEBPACK_IMPORTED_MODULE_2__.T.err("Синтаксическая ошибка в дополнительном условии вставки",this.blockId),!1}return!0}},{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!_get(_getPrototypeOf(CreativeExperiment.prototype),"run",this).call(this,t))return!1;if(this.params.script_head&&this.insertScriptHead(),this.params.script_body){var e=this.params.cssPath,r=this.params.cssPosition;this.insertScriptBody(e,r)}return!0}},{key:"insertScriptHead",value:function(){this.params.script_head.forEach((function(t){_utils_page__WEBPACK_IMPORTED_MODULE_1__.M.addTag(t.tag,t.attributes,null,"beforeEnd",t.content)}))}},{key:"insertScriptBody",value:function(t,e){var r=this;t=t||"body",e=e||"afterbegin",_utils_resources__WEBPACK_IMPORTED_MODULE_3__.u.setInterval(this,"waitObjectByCss",(function(){var n=_utils_page__WEBPACK_IMPORTED_MODULE_1__.M.getObjectByPath(t);n&&(_utils_resources__WEBPACK_IMPORTED_MODULE_3__.u.stopScheduler(r,"waitObjectByCss"),r.params.script_body.forEach((function(t){_utils_page__WEBPACK_IMPORTED_MODULE_1__.M.addTag(t.tag,t.attributes,n,e,t.content)})))}),50)}}]),CreativeExperiment}(_base_BaseCreative__WEBPACK_IMPORTED_MODULE_0__.n)},906:(t,e,r)=>{r.d(e,{n:()=>u});var n=r(473),o=r(958);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function c(t,e,r){return(e=s(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}var u=function(){function t(e,r,o,i,a){var s=this;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,"blockId",!1),c(this,"format",!1),c(this,"creativeRole",!1),c(this,"creativeType",!1),c(this,"params",!1),c(this,"formatParams",!1),c(this,"container",!1),c(this,"isRun",!1),!!this.validParams(e,o,i,a)&&(this.blockId=e,this.format=r,this.creativeRole=o,this.creativeType=i,this.params=a,n.G.subscribe("blockReset",this.blockId,(function(){return s.reset()})),!0)}var e,r,i;return e=t,r=[{key:"validParams",value:function(t,e,r){return!0}},{key:"canRun",value:function(){return!0}},{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isRun=!0,t.formatParams&&(this.formatParams=t.formatParams),!0}},{key:"getCurrentBidder",value:function(){return!1}},{key:"reset",value:function(){return this.isRun=!1,o.u.stopAllSchedulers(this),o.u.removeAllEventListeners(this),n.G.unsubscribeSubscriber(this),!1}}],r&&a(e.prototype,r),i&&a(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}()},473:(t,e,r)=>{r.d(e,{G:()=>o});var n=r(705),o={channels:{},subscribe:function(t,e,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];"function"==typeof r?(void 0===this.channels[t]&&(this.channels[t]={}),void 0===this.channels[t][e]&&(this.channels[t][e]=[]),i?this.channels[t][e].unshift({subscriber:o,callback:r}):this.channels[t][e].push({subscriber:o,callback:r})):n.T.err("При подписке на событие ".concat([t]).concat([e]," передана не функция"),e)},publish:function(t,e){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Array.isArray(null===(r=this.channels[t])||void 0===r?void 0:r[e]))for(var i in this.channels[t][e])if(!isNaN(i)){var a=this.channels[t][e][i];try{a.callback(o)}catch(t){n.T.err(t,e)}}},unsubscribeBlock:function(t){for(var e in this.channels)this.unsubscribe(e,t)},unsubscribe:function(t,e){var r;null!==(r=this.channels[t])&&void 0!==r&&r[e]&&(delete this.channels[t][e],0===this.channels[t].length&&delete this.channels[t])},unsubscribeSubscriber:function(t){for(var e in this.channels){for(var r in this.channels[e]){for(var n in this.channels[e][r])this.channels[e][r][n].subscriber===t&&delete this.channels[e][r][n];0==this.channels[e][r].length&&delete this.channels[e][r]}0==this.channels[e].length&&delete this.channels[e]}}}},705:(t,e,r)=>{r.d(e,{T:()=>a});var n=r(575),o=r(307);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}var a={logs:{},showLog:function(t){var e,r=null!==(e=n.t.session("showLogBlock"))&&void 0!==e&&e;return!!this.isLogsOn()&&(!r||r===t)},isLogsOn:function(){var t;return null!==(t=n.t.session("showLog"))&&void 0!==t&&t},switchLogs:function(t){n.t.session("showLog",t)},on:function(t){return this.switchLogs(!0),t&&n.t.session("showLogBlock",t),"Логи включены"},off:function(){return this.switchLogs(!1),n.t.session("showLogBlock",!1,0),"Логи выключены"},log:function(t,e){this._def("log",t,e)},err:function(t,e){this._def("error",t,e)},info:function(t,e){this._def("info",t,e)},_def:function(t,e,r){if(void 0!==r){!1!==r&&"object"!=i(r)&&(r=window.adfinity.block(r));var n=r.blockId;this.showLog(n)&&(console[t](this.format(r),e),this.timingAdd(e,n))}else console.error("Не задан блок",t,e)},format:function(t){var e="ADFINITY: ";return null!=t&&t.blockCaption&&(e+=null==t?void 0:t.blockCaption),e},timing:performance.getEntriesByType("navigation")[0],timingSwitch:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return n.t.session("showLogTiming",!!t),"Тайминг "+(t?"включен":"выключен")},timingAdd:function(t,e){void 0===this[e]&&(this[e]=[]);var r=0,i=0,a=o.M.tmFromStart(),c=this[e].length;c>0?(r=this[e][0].tmFromStart,i=this[e][c-1].tmFromStart):r=i=a,this[e].push({tmFromStart:a,tmFromFirts:a-r,tmFromLast:a-i,msg:e+": "+t}),n.t.session("showLogTiming")&&console.table(this[e])}}},307:(t,e,r)=>{r.d(e,{M:()=>o});var n=r(705),o={tmStart:!1,styles:{},stylesTag:!1,currentPage:!1,init:function(){this.setTmStart(),this.setCurrentPage(),this.testLunchInfo()},setTmStart:function(){this.tmStart=this.now()},now:function(){return new Date/1e3},tmFromStart:function(){return this.now()-this.tmStart},setCurrentPage:function(){this.currentPage=this.getPagePath()},testLunchInfo:function(){("#adfinity_info_on"==window.location.hash||location.search.search("adfinity_info_on")>-1)&&n.T.switchLogs(!0),("#adfinity_info_off"==window.location.hash||location.search.search("adfinity_info_off")>-1)&&n.T.switchLogs(!1)},hasChangedCurrentPage:function(){return this.currentPage!==this.getPagePath()},getPagePath:function(){return window.location.pathname+window.location.search},addTag:function(t,e,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"afterend",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=document.createElement(t);for(var c in e)a.setAttribute(c,e[c]);return i&&(a.innerHTML=i),(r=null!==(n=r)&&void 0!==n?n:this.adfinityScriptNode()).insertAdjacentElement(o,a),a},adfinityScriptNode:function(){return document.querySelector('script[src*="adfinity."]')},addStyle:function(t,e){this.styles[t]=e,this.renderStyles()},removeStyle:function(t){void 0!==this.styles[t]&&delete this.styles[t],this.renderStyles()},renderStyles:function(){!1===this.stylesTag&&(this.stylesTag=this.addTag("style",{id:"adfox_styles"}));var t=[];for(var e in this.styles)t.push(this.styles[e]);this.stylesTag.innerHTML=t.join("\n")},checkDomain:function(t){var e="www.",r=window.location.host;if(t.main.replace(e,"")===r.replace(e,""))return!0;for(var o in t.mirror){var i=new RegExp(t.mirror[o]);if(r.match(i))return!0}return n.T.err("Домена нет среди разрешённых",!1),!1},checkUrlForShow:function(t){for(var e=null!=t?t:[],r=window.location.pathname,o=0;o<e.length;++o){var i=new RegExp(e[o]);if(r.match(i))return n.T.err("На этой странице исключён вывод рекламы",!1),!1}return!0},getObjectByPath:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=t.replace(/:nth-child/g,""),o=1,i=0,a=!1,c=!0,s=r.match(/(.*)\(((\d*)n\+(\d+)|(\d*)n|(\d+))\)(\d*)$/);if(s&&(void 0!==s[6]?(o=0,i=parseInt(s[6]),a=1):void 0!==s[5]?(o=s[5],i=0):void 0!==s[3]&&void 0!==s[4]?(o=s[3],i=parseInt(s[4])):(n.T.err("Неверное регулярное выражение - "+t),c=!1),o=""==o?1:parseInt(o),r=s[1].replace(/\(/g,":nth-child("),s[7].length>0&&(a=parseInt(s[7]),a=!isNaN(a)&&a)),!1===c)return!1;var u=document.querySelectorAll(r),l=[];return u.forEach((function(t,e){e++;for(var r=0;;){var n=o*r+i;if(n===e){l.push(t);break}if(0===o||n>e)break;r++}})),!1!==a&&(l=l.slice(0,a)),!1===e?l:l[e]},getObjectByXPath:function(t,e){var r,o=[],i=!0;if(null===t.match(/\//)&&(n.T.err("Неверное регулярное выражение - "+t),i=!1),!1===i)return!1;for(var a=0;null!==r;)r=document.evaluate(t,document.body,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null).snapshotItem(a),a++,o.push(r);return o.pop(),!1===e?o:o[e]}}},958:(t,e,r)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}r.d(e,{u:()=>o});var o={runScheduler:function(t,e,r,o,i){if("object"!==n(e)||"function"!=typeof o)return!1;for(var a=!1,c=arguments.length,s=new Array(c>5?c-5:0),u=5;u<c;u++)s[u-5]=arguments[u];return"Interval"==t?a=setInterval.apply(void 0,[o,i].concat(s)):"Timeout"==t&&(a=setTimeout.apply(void 0,[o,i].concat(s))),!1!==a&&("object"!==n(e.schedulers)&&(e.schedulers={}),e.schedulers[r]={schedulerType:t,id:a},a)},setInterval:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.runScheduler.apply(this,["Interval"].concat(e))},setTimeout:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return this.runScheduler.apply(this,["Timeout"].concat(e))},stopScheduler:function(t,e){var r,o=null==t||null===(r=t.schedulers)||void 0===r?void 0:r[e];return"object"===n(o)&&("Interval"==o.schedulerType?clearInterval(o.id):"Timeout"==o.schedulerType&&clearTimeout(o.id),delete t.schedulers[e],!0)},stopAllSchedulers:function(t){if("object"!==n(null==t?void 0:t.schedulers))return!1;for(var e in t.schedulers)this.stopScheduler(t,e);return!0},addEventListener:function(t,e,r,o,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return"object"===n(t)&&"object"===n(r)&&"function"==typeof i&&(!1===n(a)?r.addEventListener(o,i):r.addEventListener(o,i,a),"object"!==n(t.eventListeners)&&(t.eventListeners={}),t.eventListeners[e]={eventObject:r,eventType:o,listener:i,options:a},!0)},removeEventListener:function(t,e){var r,o=null==t||null===(r=t.eventListeners)||void 0===r?void 0:r[e];return"object"===n(o)&&(!1===n(o.options)?o.eventObject.removeEventListener(o.eventType,o.listener):o.eventObject.removeEventListener(o.eventType,o.listener,o.options),!0)},removeAllEventListeners:function(t){var e=null==t?void 0:t.eventListeners;if("object"!==n(e))return!1;for(var r in e)this.removeEventListener(t,r);return!0}}},575:(t,e,r)=>{r.d(e,{t:()=>n});var n={pageStorage:{},page:function(t,e,r){return this.default(this.pageStorage,t,e,r)},session:function(t,e,r){return this.default(sessionStorage,t,e,r)},local:function(t,e,r){return this.default(localStorage,t,e,r)},default:function(t,e,r,n){var o,i=Date.now();if(void 0!==r&&(o={val:r},n=parseInt(n),isNaN(n)||(o.time=i+1e3*n),t[e]=JSON.stringify(o)),void 0!==t[e]){if(!(void 0!==(o=JSON.parse(t[e])).time&&o.time<i))return o.val;t.removeItem(e)}}}},847:()=>{}},__webpack_module_cache__={},deferred;function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var r=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](r,r.exports,__webpack_require__),r.exports}__webpack_require__.m=__webpack_modules__,deferred=[],__webpack_require__.O=(t,e,r,n)=>{if(!e){var o=1/0;for(s=0;s<deferred.length;s++){for(var[e,r,n]=deferred[s],i=!0,a=0;a<e.length;a++)(!1&n||o>=n)&&Object.keys(__webpack_require__.O).every((t=>__webpack_require__.O[t](e[a])))?e.splice(a--,1):(i=!1,n<o&&(o=n));if(i){deferred.splice(s--,1);var c=r();void 0!==c&&(t=c)}}return t}n=n||0;for(var s=deferred.length;s>0&&deferred[s-1][2]>n;s--)deferred[s]=deferred[s-1];deferred[s]=[e,r,n]},__webpack_require__.d=(t,e)=>{for(var r in e)__webpack_require__.o(e,r)&&!__webpack_require__.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={626:0,156:0};__webpack_require__.O.j=e=>0===t[e];var e=(e,r)=>{var n,o,[i,a,c]=r,s=0;if(i.some((e=>0!==t[e]))){for(n in a)__webpack_require__.o(a,n)&&(__webpack_require__.m[n]=a[n]);if(c)var u=c(__webpack_require__)}for(e&&e(r);s<i.length;s++)o=i[s],__webpack_require__.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return __webpack_require__.O(u)},r=self.webpackChunk=self.webpackChunk||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})(),__webpack_require__.O(void 0,[156],(()=>__webpack_require__(756)));var __webpack_exports__=__webpack_require__.O(void 0,[156],(()=>__webpack_require__(847)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();
/* Published at: 2024-07-17 14:55:57 */